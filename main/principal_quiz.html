<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Quiz</title>
    <link rel="stylesheet" href="CSS/style_quiz.css">
    <link rel="stylesheet" href="CSS/style.css">
    <link
            href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
            rel="stylesheet"
            integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN"
            crossorigin="anonymous"
    />
    <script type="text/javascript" src="JS/main.js"></script>
    <script src="JS/functii.js"></script>
</head>

<textarea title="Chat Log" id="log" readonly
          style="display: none; width: 100%; height: 100px; resize: none; margin: 0; padding: 0; border: 0;"> </textarea>
<input title="Chat Input" id="input" type="text" style="display: none; width: 100%; border-width: 1px 0 1px 0;" autofocus/>

<script>
    function retryWSInitialization() {
        if (debugWithoutWS) return;
        if (wsValidity === true) return;
        ws.send("*" +           getSessionKeyData());
        ws.send("%" + "quiz");
    }

    let debugWithoutWS = true;
    let consoleMode = false;

    if (!debugWithoutWS) {
        var ws = new WebSocket("ws://localhost:8080/proiect_site_spaniola_war_exploded/ws");

        ws.onmessage = function (event) {
            console.log(event.data);
            if (consoleMode) document.getElementById("log").value += event.data + "\n";
            code = event.data.toString().substr(0, 2);
            value = event.data.toString().substr(2);

            if (code === "VV") {
                wsValidity = true;
                wsInitializationInterval = clearInterval(wsInitializationInterval);
            }   else
            if (code === "ID") {
                globalID = value;
                updateGlobal();
            } else if (code === "QB") {
                if (consoleMode) document.getElementById("log").value += "the quiz should start" + "\n";
                if (consoleMode) document.getElementById("log").value += event.data.toString().substr(2) + "\n";
                initializeQuestions(value);
                startQuiz();
            } else if (code === "QR") {
                if (consoleMode) document.getElementById("log").value += "the quiz should restart" + "\n";
                initializeQuestions(value);
                restartQuiz();
            } else if (code === "QA") {
                abortQuiz();                          /* !!! */
            } else if (code === "QP") {               /* !!! */
                if (consoleMode) document.getElementById("log").value += "received leadeboard data!" + "\n";
                setLeaderboardRawData(value);
            } else if (code === "QK") {
                updateRanking(value);
            } else if (code === "TJ") {
                toggleJob();
            } else if (code === "TQ") {
                toggleGame();                         /* !!! */
            } else if (code === "TA") {
                toggleAlone();
            } else
            if (code === "XX") {
                redirectToLogin();
            } else
            if (code === "PP") {
                showInformation(value);
            }
        }

        document.getElementById("input").addEventListener("keyup", function (event) {
            if (event.keyCode === 13) {
                ws.send(event.target.value);
                event.target.value = "";
            }
        });
    }

    window.onload = function() {
        onloadGeneralTasks();
        if (!debugWithoutWS) {
            ws.send("*" + getSessionKeyData());
            ws.send("%" + "quiz");
        }
    }

</script> 


<body style="background-color: #947BD3;">
    <div id="warning-message">
        acest site este disponibil doar in modul peisaj
  	</div>
	<div id="wrapper">
        <div id="comentarii" class="comentariu">
            <img src="imagini/imagini-butoane/blankcolor.png" style="width: 800%; height: 100%;">
            <p id="comentariitext">this website is only viewable in landscape mode</p>
        </div>
        <!-- navbar -->
        <a style="top: 2vh; left: 0;" href="main.html" class="navbar">
            <!-- <span class="slant1" style="color: white;">HOME</span> -->
            <img src="imagini/imagini-butoane/main_umplut.png" style=" width: 100%; height: 100%; height: 15vh; width: 10vw;" >
        </a>

        <a style="top: 66vh; height: 16%;" href="inv.html" class="navbar">
            <!-- <span style="font-size: 4vh;" class="slant">Learn</span> -->
            <img src="imagini/imagini-butoane/learn_umplut.png" style=" width: 100%; height: 100%; height: 15vh; width: 10vw;" >
        </a>
        <div style="list-style-type: none;z-index: 999;">
            <a href="harti.html" class="imgg" style="top: 18vh;">
                <img src="imagini/imagini-butoane/spania_umplu.png" style=" width: 100%; height: 100%; height: 15vh; width: 10vw;" >
            </a>
            <a href="bingo.html" class="imgg" style="top: 34vh;">
                <img src="imagini/imagini-butoane/bingo_umplut.png" style=" width: 100%; height: 100%; height: 15vh; width: 10vw;">
            </a>
            <a href = "principal_quiz.html" class="imgg" style=" top: 50vh;">
                <img src="imagini/imagini-butoane/quiz_umplut.png" style=" width: 100%; height: 100%; height: 15vh; width: 10vw;" >
            </a>
            <a href="#">
            <img class="buton" onclick="openForm()" id="removee" src="imagini/imagini-butoane/room_umplut.png"
                 style=" height: 16vh; width: 10vw;"></img></a>
            <div style="display: none;z-index: 999;"id="myForm">
                <li class="GR">
                    <!--<div class="middle1"; id="gameroomIDUI"><input class="inputu"; id="GRinput"></div>-->
                    <div id="gameroomIDUI"><input class="inputu"; id="GRinput"></div>
                </li>
                <button class="close" onclick="closeForm()">Enter</button>
            </div>
        </div>
        <div class="scrisvertical">HOME</div>
        <div class="scrisvertical" style="top: 20vh;">HARTI</div>
        <div class="scrisvertical" style="top: 36vh;">BINGO</div>
        <div class="scrisvertical" style="top: 53vh;">QUIZ</div>
        <div class="scrisvertical" style="top: 68vh;">LEARN</div>
        <div class="scrisvertical" style="top: 85vh;">ROOM</div>
        <div class="scrisvertical" style="top: 82vh; left: 5vw; writing-mode: horizontal-tb">GAME</div>
        <!-- SFARSIT NAVBAR  -->

    <div id="rankingUIText"></div>
<div id="container">
    <div id="start">Începe quizul!
    </div>
    <div id="quiz" style="display: none">
        <div id="question"></div>
        <div id="choices">
            <!-- id="A" onclick="checkAnswer('A')" -->
            <div class="answer" id="A" onclick="checkAnswer('A')" style="margin-top:5vh;">
                <div class="boxanswer">
                  <div class="contentasnwer">
                  </div>
                </div>
              </div>
              <div class="answer" id="B" onclick="checkAnswer('B')">
                <div class="boxanswer">
                  <div class="contentasnwer">
                  </div>
                </div>
              </div>
              <div class="answer" id="C" onclick="checkAnswer('C')">
                <div class="boxanswer">
                  <div class="contentasnwer">
                  </div>
                </div>
              </div>
              <div class="answer" id="D" onclick="checkAnswer('D')" style="display:none">
                <div class="boxanswer">
                  <div class="contentasnwer">
                  </div>
                </div>
              </div>
        </div>
        <div id="progress"></div>
    </div>
    <div id="score"></div>
    <div id="restart">ReÎncearca!</div>
    <div id="showLeaderboard">Arată Rezultate</div>
    <div id="finish"></div>
</div>
<script src="JS/quiz.js"></script>
</div>


</body>
</html>